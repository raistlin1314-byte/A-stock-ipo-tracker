<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aè‚¡æ‰“æ–°æé†’ - æ¯å‘¨æ–°è‚¡ç”³è´­ä¿¡æ¯</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        .section {
            margin: 20px 0;
        }
        .week-summary {
            background-color: #e8f4fd;
            padding: 15px;
            border-radius: 5px;
            border-left: 4px solid #3498db;
        }
        .month-calendar {
            overflow-x: auto;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 10px 0;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: #3498db;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .upcoming-soon {
            background-color: #fff3cd;
        }
        .today {
            background-color: #d4edda;
        }
        .no-data {
            text-align: center;
            color: #666;
            font-style: italic;
        }
        .info-box {
            background-color: #e8f5e9;
            border-left: 4px solid #28a745;
            padding: 10px;
            margin: 10px 0;
        }
        .warning {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 10px;
            margin: 10px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ“Š Aè‚¡æ‰“æ–°æé†’ç³»ç»Ÿ</h1>
        
        <div class="info-box">
            <strong>ğŸ’¡ ä½¿ç”¨è¯´æ˜ï¼š</strong>æœ¬é¡µé¢å±•ç¤ºä¸‹å‘¨åŠæœªæ¥ä¸€ä¸ªæœˆçš„Aè‚¡æ–°è‚¡ç”³è´­ä¿¡æ¯ã€‚æ•°æ®ä¸ºæ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…ä½¿ç”¨æ—¶å¯æ¥å…¥çœŸå®APIã€‚
        </div>
        
        <div class="section">
            <h2>ğŸ“… ä¸‹å‘¨æ–°è‚¡ç”³è´­æ¸…å•</h2>
            <div id="weekly-summary" class="week-summary">
                <p><strong>æ›´æ–°æ—¶é—´ï¼š</strong><span id="update-time">2024-12-19 10:30:45 (è‡ªåŠ¨æ›´æ–°)</span></p>
                <table id="weekly-table">
                    <thead>
                        <tr>
                            <th>è‚¡ç¥¨åç§°</th>
                            <th>ä»£ç </th>
                            <th>ç”³è´­æ—¥æœŸ</th>
                            <th>å¸‚åœº</th>
                            <th>å‘è¡Œä»·</th>
                            <th>ç”³è´­ä¸Šé™(ä¸‡è‚¡)</th>
                            <th>æ‰€éœ€å¸‚å€¼(ä¸‡å…ƒ)</th>
                            <th>è¡Œä¸š</th>
                            <th>æ“ä½œ</th>
                        </tr>
                    </thead>
                    <tbody id="weekly-body">
                        <!-- åŠ¨æ€å¡«å…… -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="section">
            <h2>ğŸ—“ï¸ æœªæ¥ä¸€ä¸ªæœˆæ–°è‚¡æ—¥å†</h2>
            <div class="month-calendar">
                <table id="monthly-table">
                    <thead>
                        <tr>
                            <th>æ—¥æœŸ</th>
                            <th>è‚¡ç¥¨åç§°</th>
                            <th>ä»£ç </th>
                            <th>å¸‚åœº</th>
                            <th>å‘è¡Œä»·</th>
                            <th>è¡Œä¸š</th>
                            <th>çŠ¶æ€</th>
                        </tr>
                    </thead>
                    <tbody id="monthly-body">
                        <!-- åŠ¨æ€å¡«å…… -->
                    </tbody>
                </table>
            </div>
        </div>
        
        <div class="warning">
            <strong>âš ï¸ é£é™©æç¤ºï¼š</strong>æ‰“æ–°æœ‰é£é™©ï¼ŒæŠ•èµ„éœ€è°¨æ…ã€‚è¯·æ³¨æ„æŸ¥çœ‹å‘è¡Œå¸‚ç›ˆç‡ã€è¡Œä¸šå¯¹æ¯”ç­‰ä¿¡æ¯ï¼Œç†æ€§å‚ä¸ç”³è´­ã€‚
        </div>
        
        <p style="text-align:center; color:#666;">æœ€åæ›´æ–°ï¼š2025/12/14 19:22:17 (é€šè¿‡Tushare APIè‡ªåŠ¨è·å–)</p>
    </div>

    <script>
        // æ¨¡æ‹ŸAè‚¡æ–°è‚¡æ•°æ®
        const mockIpoData = [
    {
        "name": "è‡³ä¿¡è‚¡ä»½",
        "code": "603352",
        "date": "2026-01-06",
        "market": "Aè‚¡",
        "price": 21.88,
        "maxSubscription": 18000,
        "requiredMarketValue": {
            "shanghai": 0,
            "shenzhen": 0
        },
        "industry": "å¾…å®š",
        "peRatio": 26.85,
        "expectedFundraise": "12.399äº¿",
        "listingDate": "å¾…å®š"
    },
    {
        "name": "ç§‘é©¬ææ–™",
        "code": "920086",
        "date": "2026-01-06",
        "market": "Aè‚¡",
        "price": 11.66,
        "maxSubscription": 941400,
        "requiredMarketValue": {
            "shanghai": 0,
            "shenzhen": 0
        },
        "industry": "å¾…å®š",
        "peRatio": 14.2,
        "expectedFundraise": "2.439äº¿",
        "listingDate": "å¾…å®š"
    }
];

        // è·å–ä¸‹å‘¨çš„æ—¥æœŸèŒƒå›´
        function getNextWeekDates() {
            const today = new Date();
            const dayOfWeek = today.getDay();
            const diffToMonday = dayOfWeek === 0 ? -6 : 1 - dayOfWeek; // å‘¨æ—¥ç‰¹æ®Šå¤„ç†
            const nextMonday = new Date(today);
            nextMonday.setDate(today.getDate() + diffToMonday + 7);
            
            const nextSunday = new Date(nextMonday);
            nextSunday.setDate(nextMonday.getDate() + 6);
            
            return { start: nextMonday, end: nextSunday };
        }

        // è·å–æœªæ¥ä¸€ä¸ªæœˆçš„æ—¥æœŸèŒƒå›´
        function getFutureMonthDates() {
            const today = new Date();
            const futureEnd = new Date();
            futureEnd.setDate(today.getDate() + 30);
            return { start: today, end: futureEnd };
        }

        // è¿‡æ»¤æŒ‡å®šæ—¥æœŸèŒƒå›´å†…çš„IPO
        function filterIposInDateRange(data, startDate, endDate) {
            return data.filter(item => {
                const itemDate = new Date(item.date);
                return itemDate >= startDate && itemDate <= endDate;
            });
        }

        // æ ¼å¼åŒ–æ—¥æœŸæ˜¾ç¤º
        function formatDate(date) {
            return date.toISOString().split('T')[0];
        }

        // æ¸²æŸ“ä¸‹å‘¨æ–°è‚¡è¡¨æ ¼
        function renderWeeklyTable(data) {
            const tbody = document.getElementById('weekly-body');
            tbody.innerHTML = '';
            
            if (data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="9" class="no-data">ä¸‹å‘¨æš‚æ— æ–°è‚¡ç”³è´­</td></tr>';
                return;
            }
            
            data.forEach(item => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${item.name}</td>
                    <td>${item.code}</td>
                    <td>${item.date}</td>
                    <td>${item.market}</td>
                    <td>${item.price ? 'Â¥' + item.price.toFixed(2) : 'å¾…å®š'}</td>
                    <td>${(item.maxSubscription / 10000).toFixed(2)}ä¸‡</td>
                    <td>æ²ª${item.requiredMarketValue.shanghai}ä¸‡/æ·±${item.requiredMarketValue.shenzhen}ä¸‡</td>
                    <td>${item.industry}</td>
                    <td><button onclick="alert('è¯·åœ¨äº¤æ˜“è½¯ä»¶ä¸­ç”³è´­ ${item.name} (${item.code})')">ç”³è´­</button></td>
                `;
                tbody.appendChild(row);
            });
        }

        // æ¸²æŸ“æœˆåº¦æ–°è‚¡æ—¥å†
        function renderMonthlyTable(data) {
            const tbody = document.getElementById('monthly-body');
            tbody.innerHTML = '';
            
            if (data.length === 0) {
                tbody.innerHTML = '<tr><td colspan="7" class="no-data">æœªæ¥ä¸€ä¸ªæœˆæš‚æ— æ–°è‚¡ç”³è´­</td></tr>';
                return;
            }
            
            data.forEach(item => {
                const row = document.createElement('tr');
                const status = item.price ? 'å·²å®š' : 'å¾…å®š';
                
                row.innerHTML = `
                    <td>${item.date}</td>
                    <td>${item.name}</td>
                    <td>${item.code}</td>
                    <td>${item.market}</td>
                    <td>${item.price ? 'Â¥' + item.price.toFixed(2) : 'å¾…å®š'}</td>
                    <td>${item.industry}</td>
                    <td>${status}</td>
                `;
                tbody.appendChild(row);
            });
        }

        // åˆå§‹åŒ–é¡µé¢
        function initPage() {
            const nextWeek = getNextWeekDates();
            const monthly = getFutureMonthDates();
            
            const weeklyData = filterIposInDateRange(mockIpoData, nextWeek.start, nextWeek.end);
            const monthlyData = filterIposInDateRange(mockIpoData, monthly.start, monthly.end);
            
            renderWeeklyTable(weeklyData);
            renderMonthlyTable(monthlyData);
            
            document.getElementById('update-time').textContent = new Date().toLocaleString('zh-CN');
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        window.onload = function() {
            initPage();
            
            // æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡æ˜¯å¦éœ€è¦æ›´æ–°ï¼ˆå®é™…åº”ç”¨ä¸­å¯æ”¹ä¸ºå®šæ—¶APIè°ƒç”¨ï¼‰
            setInterval(function() {
                const now = new Date();
                if (now.getSeconds() === 0) { // æ¯åˆ†é’Ÿæ›´æ–°æ—¶é—´æ˜¾ç¤º
                    document.getElementById('update-time').textContent = now.toLocaleString('zh-CN');
                }
            }, 1000);
        };

        // æ·»åŠ ä¸€ä¸ªåˆ·æ–°æŒ‰é’®åŠŸèƒ½
        function refreshData() {
            alert('æ­£åœ¨åˆ·æ–°æœ€æ–°æ•°æ®...');
            initPage(); // é‡æ–°åˆå§‹åŒ–
        }
    </script>
</body>
</html>